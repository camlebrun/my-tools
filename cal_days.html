<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Calculatrice de Jours - QuickTools 2025</title>
    <meta name="description" content="Calculatrice de jours simple et précise pour vos besoins quotidiens. Interface moderne et résultats fiables.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="container">
            <a class="navbar-brand" href="index.html" aria-label="QuickTools - Accueil">
                <span class="brand-icon">⚡</span>
                QuickTools
            </a>
            
            <button class="nav-toggle" id="navToggle" aria-label="Menu de navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="nav-menu" id="navMenu">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            Accueil
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="qr_code.html">
                            QR Code
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="cal_days.html" aria-current="page">
                            Calculatrice
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pwd.html">
                            Mots de passe
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    Calculatrice de <span class="highlight">Jours</span>
                </h1>
                <p class="hero-subtitle">
                    Calculez facilement les différences de dates et ajoutez/soustrayez des jours avec précision
                </p>
            </div>
            
            <div class="hero-visual">
                <div class="floating-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="tools-section">
        <div class="container">
            <div class="calculator-container">
                <!-- Input Section -->
                <div class="calculator-input-section">
                    <h2 class="section-title">Calculez vos dates</h2>
                    <p class="section-subtitle">
                        Choisissez une opération et entrez vos dates pour obtenir des résultats précis
                    </p>
                    
                    <div class="form-group">
                        <label for="operation" class="form-label">Opération :</label>
                        <select id="operation" name="operation" class="form-control">
                            <option value="" selected disabled>Choisir une opération</option>
                            <option value="add">Ajouter des jours</option>
                            <option value="subtract">Soustraire des jours</option>
                            <option value="difference">Différence entre deux dates</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="dateGroup" style="display: none;">
                        <label for="date" class="form-label">Date :</label>
                        <input id="date" name="date" class="form-control" placeholder="Sélectionnez une date">
                    </div>
                    
                    <div class="form-group" id="secondDateGroup" style="display: none;">
                        <label for="secondDate" class="form-label">Deuxième date :</label>
                        <input id="secondDate" name="secondDate" class="form-control" placeholder="Sélectionnez une deuxième date">
                    </div>
                    
                    <div class="form-group" id="daysGroup" style="display: none;">
                        <label for="days" class="form-label">Nombre de jours :</label>
                        <input type="number" id="days" name="days" class="form-control" min="0" value="7">
                    </div>
                    
                    <button id="calculateBtn" class="btn btn-primary" style="display: none;">
                        Calculer
                    </button>
                </div>
                
                <!-- Result Section -->
                <div class="calculator-result-section">
                    <div id="result" class="result"></div>
                    <div id="error" class="error" style="display: none;"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3 class="footer-title">QuickTools</h3>
                    <p class="footer-description">
                        Outils simples pour un quotidien plus efficace
                    </p>
                </div>
                
                <div class="footer-links">
                    <div class="footer-section">
                        <h4>Outils</h4>
                        <ul>
                            <li><a href="cal_days.html">Calculatrice de Jours</a></li>
                            <li><a href="qr_code.html">Générateur QR Code</a></li>
                            <li><a href="pwd.html">Générateur Mots de Passe</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 QuickTools. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
    <script>
        // Date Calculator Logic
        class DateCalculator {
            constructor() {
                this.operationSelect = document.getElementById('operation');
                this.dateInput = document.getElementById('date');
                this.secondDateInput = document.getElementById('secondDate');
                this.daysInput = document.getElementById('days');
                this.calculateBtn = document.getElementById('calculateBtn');
                this.resultDiv = document.getElementById('result');
                this.errorDiv = document.getElementById('error');
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.initializeDatePickers();
            }
            
            setupEventListeners() {
                this.operationSelect.addEventListener('change', () => this.toggleFields());
                this.calculateBtn.addEventListener('click', () => this.calculateDate());
            }
            
            initializeDatePickers() {
                // Initialize Flatpickr for date inputs
                flatpickr(this.dateInput, {
                    locale: 'fr',
                    dateFormat: 'd/m/Y',
                    allowInput: true,
                    clickOpens: true
                });
                
                flatpickr(this.secondDateInput, {
                    locale: 'fr',
                    dateFormat: 'd/m/Y',
                    allowInput: true,
                    clickOpens: true
                });
            }
            
            toggleFields() {
                const operation = this.operationSelect.value;
                const dateGroup = document.getElementById('dateGroup');
                const secondDateGroup = document.getElementById('secondDateGroup');
                const daysGroup = document.getElementById('daysGroup');
                const calculateBtn = this.calculateBtn;
                
                // Hide all groups first
                dateGroup.style.display = 'none';
                secondDateGroup.style.display = 'none';
                daysGroup.style.display = 'none';
                calculateBtn.style.display = 'none';
                
                // Show relevant groups based on operation
                switch (operation) {
                    case 'add':
                    case 'subtract':
                        dateGroup.style.display = 'block';
                        daysGroup.style.display = 'block';
                        break;
                    case 'difference':
                        dateGroup.style.display = 'block';
                        secondDateGroup.style.display = 'block';
                        break;
                }
                
                // Show calculate button if operation is selected
                if (operation) {
                    calculateBtn.style.display = 'block';
                }
                
                // Clear previous results
                this.clearResults();
            }
            
            calculateDate() {
                const operation = this.operationSelect.value;
                
                try {
                    let result;
                    
                    switch (operation) {
                        case 'add':
                            result = this.addDays();
                            break;
                        case 'subtract':
                            result = this.subtractDays();
                            break;
                        case 'difference':
                            result = this.calculateDifference();
                            break;
                        default:
                            throw new Error('Opération non reconnue');
                    }
                    
                    this.showResult(result);
                    this.hideError();
                    
                } catch (error) {
                    this.showError(error.message);
                    this.hideResult();
                }
            }
            
            addDays() {
                const date = this.parseDate(this.dateInput.value);
                const days = parseInt(this.daysInput.value);
                
                if (!date || isNaN(days)) {
                    throw new Error('Veuillez entrer une date et un nombre de jours valides');
                }
                
                const resultDate = new Date(date);
                resultDate.setDate(resultDate.getDate() + days);
                
                return `Date résultante : ${this.formatDate(resultDate)}`;
            }
            
            subtractDays() {
                const date = this.parseDate(this.dateInput.value);
                const days = parseInt(this.daysInput.value);
                
                if (!date || isNaN(days)) {
                    throw new Error('Veuillez entrer une date et un nombre de jours valides');
                }
                
                const resultDate = new Date(date);
                resultDate.setDate(resultDate.getDate() - days);
                
                return `Date résultante : ${this.formatDate(resultDate)}`;
            }
            
            calculateDifference() {
                const date1 = this.parseDate(this.dateInput.value);
                const date2 = this.parseDate(this.secondDateInput.value);
                
                if (!date1 || !date2) {
                    throw new Error('Veuillez entrer deux dates valides');
                }
                
                const diffTime = Math.abs(date2 - date1);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (date1 > date2) {
                    return `${diffDays} jour(s) entre les deux dates`;
                } else {
                    return `${diffDays} jour(s) entre les deux dates`;
                }
            }
            
            parseDate(dateString) {
                if (!dateString) return null;
                
                // Handle dd/mm/yyyy format
                const parts = dateString.split('/');
                if (parts.length === 3) {
                    const day = parseInt(parts[0]);
                    const month = parseInt(parts[1]) - 1; // Month is 0-indexed
                    const year = parseInt(parts[2]);
                    
                    if (isNaN(day) || isNaN(month) || isNaN(year)) {
                        return null;
                    }
                    
                    return new Date(year, month, day);
                }
                
                // Handle other formats
                const date = new Date(dateString);
                return isNaN(date.getTime()) ? null : date;
            }
            
            formatDate(date) {
                return date.toLocaleDateString('fr-FR', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
            }
            
            showResult(result) {
                this.resultDiv.innerHTML = `<div class="result-success">${result}</div>`;
                this.resultDiv.style.display = 'block';
            }
            
            showError(message) {
                this.errorDiv.textContent = message;
                this.errorDiv.style.display = 'block';
            }
            
            hideResult() {
                this.resultDiv.style.display = 'none';
            }
            
            hideError() {
                this.errorDiv.style.display = 'none';
            }
            
            clearResults() {
                this.hideResult();
                this.hideError();
            }
        }
        
        // Initialize Date Calculator when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new DateCalculator();
        });
    </script>
</body>
</html>
