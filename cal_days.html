<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Calculatrice de Jours - Outils Personnels</title>
    <meta name="description" content="Calculateur de dates simple pour vos besoins quotidiens" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <!-- Flatpickr CSS for date picker -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="container">
        <a href="index.html" class="navbar-brand">QuickTools</a>
        <button class="nav-toggle" aria-label="Toggle navigation">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <ul class="nav-menu">
          <li><a href="index.html" class="nav-link">Accueil</a></li>
                      <li><a href="qr_code.html" class="nav-link">Générateur QR Code</a></li>
          <li><a href="cal_days.html" class="nav-link active">Calculatrice de Jours</a></li>
                      <li><a href="pwd.html" class="nav-link">Générateur Mots de Passe</a></li>
        </ul>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <div class="hero-content">
          <h1 class="hero-title">Calculatrice de <span class="text-gradient">Jours</span></h1>
          <p class="hero-subtitle">
            Calculez facilement les différences de dates et ajoutez/soustrayez des jours
          </p>
        </div>
        <div class="hero-visuals">
          <div class="floating-element"></div>
          <div class="floating-element"></div>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <main>
      <section class="tools-section">
        <div class="container">
          <div class="calculator-container">
            <div class="calculator-input-section">
              <div class="form-group">
                <label for="operation" class="form-label">Opération :</label>
                <select
                  id="operation"
                  name="operation"
                  class="form-control"
                  onchange="toggleFields()"
                >
                  <option value="" selected disabled>Choisir une opération</option>
                  <option value="add">Ajouter des jours</option>
                  <option value="subtract">Soustraire des jours</option>
                  <option value="difference">Différence entre deux dates</option>
                </select>
              </div>
              
              <div class="form-group" id="dateGroup" style="display: none">
                <label for="date" class="form-label">Date :</label>
                <input
                  type="text"
                  id="date"
                  name="date"
                  class="form-control"
                  placeholder="Sélectionnez une date"
                />
              </div>
              
              <div class="form-group" id="secondDateGroup" style="display: none">
                <label for="secondDate" class="form-label">Deuxième date :</label>
                <input
                  type="text"
                  id="secondDate"
                  name="secondDate"
                  class="form-control"
                  placeholder="Sélectionnez une deuxième date"
                />
              </div>
              
              <div class="form-group" id="daysGroup" style="display: none">
                <label for="days" class="form-label">Nombre de jours :</label>
                <input
                  type="number"
                  id="days"
                  name="days"
                  class="form-control"
                  min="0"
                  value="7"
                />
              </div>
              
              <button
                id="calculateBtn"
                class="btn btn-primary"
                onclick="calculateDate()"
                style="display: none"
              >
                Calculer
              </button>
            </div>
            
            <div class="calculator-result-section">
              <div id="result" class="result"></div>
              <div id="error" class="error" style="display: none"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section Simple -->
      <section class="simple-section">
        <div class="container">
          <div class="simple-content">
            <p class="simple-text">
              Outils simples et efficaces pour mes besoins quotidiens
            </p>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3 class="footer-brand">QuickTools</h3>
            <p class="footer-description">
              Outils personnels pour simplifier le quotidien
            </p>
          </div>
          <div class="footer-section">
            <h4>Navigation</h4>
            <ul>
              <li><a href="index.html">Accueil</a></li>
              <li><a href="qr_code.html">Générateur QR Code</a></li>
              <li><a href="cal_days.html">Calculatrice</a></li>
              <li><a href="pwd.html">Mots de Passe</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Contact</h4>
            <div class="social-links">
              <a href="#" class="social-link"><span class="social-icon"></span></a>
              <a href="#" class="social-link"><span class="social-icon"></span></a>
              <a href="#" class="social-link"><span class="social-icon"></span></a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 QuickTools. Projet personnel.</p>
        </div>
      </div>
    </footer>

    <!-- Flatpickr JS for date picker -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
    <script>
      // Initialize date pickers
      flatpickr("#date", {
        dateFormat: "d/m/Y",
        locale: "fr",
      });

      flatpickr("#secondDate", {
        dateFormat: "d/m/Y",
        locale: "fr",
      });

      function toggleFields() {
        var operation = document.getElementById("operation").value;
        var dateGroup = document.getElementById("dateGroup");
        var secondDateGroup = document.getElementById("secondDateGroup");
        var daysGroup = document.getElementById("daysGroup");
        var calculateBtn = document.getElementById("calculateBtn");

        if (operation) {
          dateGroup.style.display = "block";
          calculateBtn.style.display = "block";
          if (operation === "difference") {
            secondDateGroup.style.display = "block";
            daysGroup.style.display = "none";
          } else {
            secondDateGroup.style.display = "none";
            daysGroup.style.display = "block";
          }
        } else {
          dateGroup.style.display = "none";
          secondDateGroup.style.display = "none";
          daysGroup.style.display = "none";
          calculateBtn.style.display = "none";
        }
      }

      function calculateDate() {
        var dateInput = document.getElementById("date").value;
        var operation = document.getElementById("operation").value;
        var days = parseInt(document.getElementById("days").value);
        var secondDateInput = document.getElementById("secondDate").value;
        var resultElement = document.getElementById("result");
        var errorElement = document.getElementById("error");
        var resultDate;

        if (dateInput === "") {
          errorElement.textContent = "Veuillez choisir une date.";
          errorElement.style.display = "block";
          resultElement.textContent = "";
          return;
        }

        // Parsing de la date dans le format 'd/m/Y'
        var dateParts = dateInput.split("/");
        var inputDate = new Date(dateParts[2], dateParts[1] - 1, dateParts[0]);

        if (isNaN(inputDate.getTime())) {
          errorElement.textContent = "La date saisie est invalide.";
          errorElement.style.display = "block";
          resultElement.textContent = "";
          return;
        }

        if (operation === "add") {
          resultDate = new Date(
            inputDate.getTime() + days * 24 * 60 * 60 * 1000
          );
        } else if (operation === "subtract") {
          resultDate = new Date(
            inputDate.getTime() - days * 24 * 60 * 60 * 1000
          );
        } else if (operation === "difference") {
          if (secondDateInput === "") {
            errorElement.textContent = "Veuillez choisir une deuxième date.";
            errorElement.style.display = "block";
            resultElement.textContent = "";
            return;
          }

          var secondDateParts = secondDateInput.split("/");
          var secondDate = new Date(
            secondDateParts[2],
            secondDateParts[1] - 1,
            secondDateParts[0]
          );

          if (isNaN(secondDate.getTime())) {
            errorElement.textContent = "La deuxième date saisie est invalide.";
            errorElement.style.display = "block";
            resultElement.textContent = "";
            return;
          }

          var diffTime = Math.abs(secondDate - inputDate);
          var diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

          resultElement.textContent = "Différence: " + diffDays + " jours";
          errorElement.style.display = "none";
          return;
        }

        var options = {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        };
        var locale = "fr-FR";
        var formattedDate = resultDate.toLocaleDateString(locale, options);

        resultElement.textContent = "Résultat: " + formattedDate;
        errorElement.style.display = "none";
      }
    </script>
  </body>
</html>
